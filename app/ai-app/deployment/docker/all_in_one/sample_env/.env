# =============================================================================
# KDCube AI Platform - Docker Compose Configuration
# =============================================================================
# This file contains build contexts, paths, and docker-compose variables.
# Copy this file and adjust paths for your environment.
#
# For runtime configuration (DB passwords, API keys), see .env.backend
# =============================================================================

# -----------------------------------------------------------------------------
# DOCKER-IN-DOCKER PATH MAPPINGS
# -----------------------------------------------------------------------------
# Absolute paths on the host machine for volume mounts

# Knowledge base storage (local filesystem or S3)
# If using S3, this directory is optional but can be used for caching
HOST_KB_STORAGE_PATH=/absolute/path/to/deployment/docker/all_in_one/data/kdcube-storage

# Host directory containing ALL custom agentic bundles (subfolders, wheels, zips)
# These extend the chat service with custom Python applications
HOST_BUNDLES_PATH=/absolute/path/to/bundles

# Temporary workspace for code execution (Docker-in-Docker)
HOST_EXEC_WORKSPACE_PATH=/absolute/path/to/deployment/docker/all_in_one/data/exec-workspace

# Mount path for bundles inside the container
# DO NOT CHANGE unless you modify AGENTIC_BUNDLES_JSON references
AGENTIC_BUNDLES_ROOT=/bundles

# -----------------------------------------------------------------------------
# WEB UI BUILD CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for building the custom frontend application

# Root of customer repository containing UI source code
UI_BUILD_CONTEXT=/absolute/path/to/customer-repo

# Path to Dockerfile_UI (relative to UI_BUILD_CONTEXT)
UI_DOCKERFILE_PATH=ops/deployment/Dockerfile_UI

# Path to UI build environment file (absolute path, used for env_file mount)
UI_ENV_FILE_PATH=/absolute/path/to/customer-repo/ops/deployment/.env.ui.build

# Path to UI source code (relative to UI_BUILD_CONTEXT)
# This directory should contain package.json and your UI application
UI_SOURCE_PATH=src/ui/app

# Path to .env file for UI build (relative to UI_BUILD_CONTEXT)
# This will be copied into the build container as .env
UI_ENV_BUILD_RELATIVE=ops/deployment/.env.ui.build

# Path to nginx configuration for UI (relative to UI_BUILD_CONTEXT)
# This configures how nginx serves your built UI application
NGINX_UI_CONFIG_FILE_PATH=ops/deployment/nginx_ui.conf

# -----------------------------------------------------------------------------
# PROXY BUILD CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for building the reverse proxy (nginx)

# Common parent directory that can reach both platform and customer repos
# Example: If you have /src/platform-repo and /src/customer-repo, use /src
PROXY_BUILD_CONTEXT=/absolute/path/to/common-parent

# Path to Dockerfile_Proxy (relative to PROXY_BUILD_CONTEXT)
# This Dockerfile is provided by the platform
PROXY_DOCKERFILE_PATH=platform-repo/deployment/docker/all_in_one/Dockerfile_Proxy

# Path to custom nginx proxy configuration (relative to PROXY_BUILD_CONTEXT)
# Use nginx_proxy.conf for HTTP or nginx_proxy_ssl.conf for HTTPS
NGINX_PROXY_CONFIG_FILE_PATH=customer-repo/ops/deployment/nginx_proxy.conf

# -----------------------------------------------------------------------------
# NEO4J CONFIGURATION
# -----------------------------------------------------------------------------
# Neo4j database configuration (used by docker-compose for interpolation)

# Neo4j authentication (must match values in .env.backend)
N4J_USER=neo4j
N4J_PASSWORD=changeme_neo4j_password

# Neo4j memory settings
N4J_PAGECACHE=1G
N4J_HEAP_INITIAL=512m
N4J_HEAP_MAX=1G

# -----------------------------------------------------------------------------
# KDCube service stack instance. We scale horizontally via running multiple instances
# -----------------------------------------------------------------------------
INSTANCE_ID=my-kdcube-cb-instance-1